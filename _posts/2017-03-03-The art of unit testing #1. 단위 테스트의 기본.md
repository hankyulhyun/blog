---
layout: post
category : The Art of Unit Testing
tags : [Unit Test, .Net, C#]
title: AoUT - 1. 단위테스트의 기본
--- 

## 단위 테스트란
* * *
[위키피디아 링크](https://en.wikipedia.org/wiki/Unit_testing)를 참고하자. (한국 위키에는 별로 내용이 없다)

<br/>

## 좋은 단위 테스트의 속성

* * *

좋지 못한 단위테스트를 진행하는 것은 관리해야 할 코드의 양을 무의미하게 증가시키며, 따라서 이는 시간 낭비나 일정 관리에 어려움을 갖게 된다. 따라서 단위 테스트를 도입하기 전에 좋은 단위 테스트가 무엇인지 알아야 한다.


좋은 단위 테스트는 다음과 같은 속성을 가진다.
* 자동화, 반복 실행 가능
* 쉬운 구현
* 한번 작성되면 변경되지 않아야 함
* 누구나 실행할 수 있어야 함
* 실행이 쉬워야 함
* 속도가 빨라야 함

<br/>

## 통합 테스트

* * *

위에서 좋은 단위 테스트에 대해서 언급했으나, 실제로 내가 회사에서 진행하고 있는 프로그램에서는 전혀 단위 테스트를 사용하지 않고 있다.
하지만 프로그램을 릴리스 하기 위해서는 무언가 테스트를 해야 하긴 한다. 그래서 통합 테스트를 하고 있다. 프로그램에 인풋을 넣고 전체 시퀀스에서 문제점이 없는지 확인한다. (물론 필요한 과정이다)
문제는 여기에서 발생하는데, 특정 코드를 변경하였을 때 이와 연결된 다른 것에 영향을 미쳐 알 수 없는 오류를 발생하는 경우가 많다.
이를 알고 고치고 릴리스 했다면 그나마 다행이지만 모르고 (모든 인풋에 대해 테스트하지 못하고) 릴리스하였다가 나중에 문제가 되는 경우 이런 이야기를 듣게 된다. 

**"야 이 xx야! 왜 멀쩡한 코드 건드려서 문제를 만들어!"**

이것이 내가 Unit Test 관련 블로깅을 시작하게 된 이유이다.
최소한의 안전 장치를 가지고 적어도 되던 것이 안된다고 힘들어하지는 않아도 될 거라는 기대를 가지고 있다. 또한 리팩토링도 더 적극적으로 할 수 있지 않을까.

<br/>

## 좋은 단위 테스트란
* * *
기존의 단위 테스트의 정의에 좋은 단위 테스트의 속성을 더하여 책에서는 아래와 같이 좋은 단위 테스트에 대한 정의를 내렸다.

> '단위 테스트'는 메서드나 클래스를 호출해서 메서드나 클래스의 논리적인 작동 방식에 대한 몇 가지 가정의 성립 여부를 검사하는 자동화된 코드다. 대부분의 단위 테스트가 단위 테스트 프레임워크를 사용해 작성된다. 단위 테스트는 쉽게 작성할 수 있고 재빨리 실행할 수 있다. 단위 테스트는 완전 자동화되고 믿을 수 있으며 이해하기 쉽고 관리하기 쉽다.


<br/>

## Test Driven Development (TDD)
* * *
단위 테스트를 사용하여 테스트를 작성하는 방법을 알게 되면 이런 테스트를 언제 작성할 것인가 고민해야 한다. 이에 대한 방법론으로 널리 소개 되는 것이 Test Driven Development (TDD) 이다. TDD는 코드를 작성하기 전에 테스트를 먼저 작성하는 방법이다. 

<br/>

![TDD](https://cloud.githubusercontent.com/assets/25781932/23552969/d181f238-0061-11e7-8f50-11b76e325ba6.gif) 

<br/>

TDD에서는 아래의 순서로 개발을 진행하게 된다.

1. 코드가 이미 작동한다고 가정하고 작성한다. 코드가 실제로 구현된 것이 아니므로 테스트는 당연히 실패한다.
2. 위의 테스트를 통과할 수 있는 최소한의 코드를 작성한다. 처음부터 코드를 아름답게 구현할 필요는 없다.
3. 코드를 리팩터링한다. 조금 더 가독성을 좋게 하거나 코드의 중복을 제거하는 등의 일을 수행한다.
4. 1 ~ 3 의 과정을 반복하여 개발한다.

TDD에 관심히 있어서 이것 저것 찾아보았지만, 실제로 이를 빡빡하게 적용하면서 개발하는데에는 많은 연습이 필요해 보인다. 특히 TDD를 적용하지 않은 조직에 도입 (일부분이라도) 해보기 위해서는.

<br/>

## 참고 자료
* * *
* The Art of Unit Testing with Examples in .Net (.Net 예제로 배우는 단위테스트)
* TDD 적용한 개발 예제 (백명석님) : [https://youtu.be/wmHV6L0e1sU](https://youtu.be/wmHV6L0e1sU)
